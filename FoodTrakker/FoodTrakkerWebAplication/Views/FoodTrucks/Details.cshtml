@model FoodTrakker.Services.DTOs.FoodTruckDto;

@{
    ViewData["Title"] = "Details";
}


@{
    ViewData["Title"] = "DetailsFoodTruck";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container">
    <h1>@Model.Name Details</h1>

    <div>
        <h4>FoodTruck details</h4>
        <hr />
        <dl class="row">
            <dt class="col-sm-2">
                <label asp-for="@Model.Name">Name:</label>
            </dt>
            <dd class="col-sm-10">
                @Model.Name
            </dd>
            <dt class="col-sm-2">
                <label asp-for="@Model.Type">Cuisine type:</label>
            </dt>
            <dd class="col-sm-10">
                @Model.Type
            </dd>
            <dt class="col-sm-2">
                <label asp-for="@Model.Description">About us:</label>
            </dt>
            <dd class="col-sm-10">
                @Model.Description
            </dd>
            <dt class="col-sm-2">
                <label asp-for="@Model.AvgRating">Avg Rating:</label>
            </dt>
            <dd class="col-sm-10">
                @Model.AvgRating.ToString("0.00") from @Model.ReviewsTotalCount review(s)
            </dd>
            <dd class="col-sm-10">
                @for (var i = 1; i <= Math.Floor(Model.AvgRating); i++)
                {
                    <span class="starGlowN"></span>
                }
                @for (var i = (Math.Floor(Model.AvgRating) + 1); i <= 5; i++)
                {
                    <span class="starFadeN"></span>
                }
            </dd>
            @* <dt class="col-sm-2">
                <label asp-for="@Model.Location.ZIPCode"> ZIP code:</label>
                </dt>
                <dd class="col-sm-10">
                @Model.Location.ZIPCode
                </dd>*@
            @*    <dt class="col-sm-2">
                <label asp-for="@Model.Location.City">City:</label>
                </dt>
                <dd class="col-sm-10">
                @Model.Location.City
                </dd>
                <dt class="col-sm-2">
                <label asp-for="@Model.Location.Street">Street:</label>
                </dt>
                <dd class="col-sm-10">
                @Model.Location.Street
                </dd>
                <dt class="col-sm-2">
                <label asp-for="@Model.Location.StartDate">Available from:</label>
                </dt>
                <dd class="col-sm-10">
                @Model.Location.StartDate.Date
                </dd>
                <dt class="col-sm-2">
                <label asp-for="@Model.Location.EndDate">to:</label>
                </dt>
                <dd class="col-sm-10">
                @Model.Location.EndDate.Date
                </dd>
                @*<h4>Events participation</h4>
                @await Component.InvokeAsync("FoodTruckEvents",@Model)*@
        </dl>
    </div>
    <div>
        <h4>Reviews:</h4>
        @await Component.InvokeAsync("FoodTruckReview", @Model.Id)
        <a href="@Url.Action("Index","FoodTrucks")" class="btn btn-secondary"> Back to List</a>

        @if (User.IsInRole(Roles.User))
        {
            if (!Model.HasCurrentUserReview)
            {
                <a asp-controller="User" asp-action="CreateReview" asp-route-id="@Model.Id" class="btn btn-primary mx-2"><i class="bi bi-pencil-square"></i>Add Review</a>
            }
            if (Model.IsAddedToFav)
            {
                <a asp-controller="User" asp-action="RemoveFoodTruckFromFavourites" asp-route-id="@Model.Id" class="btn btn-primary mx-2"><i class="bi bi-pencil-square"></i>Remove From Favourites!</a>
            }
            else
            {
                <a asp-controller="User" asp-action="AddFoodTruckToFavourites" asp-route-id="@Model.Id" class="btn btn-primary mx-2"><i class="bi bi-pencil-square"></i>Add To Favourites!</a>
            }

        }
        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    @Html.Raw(@ViewBag.Alert)
                </div>
            </div>
        </div>
    </div>

</div>

